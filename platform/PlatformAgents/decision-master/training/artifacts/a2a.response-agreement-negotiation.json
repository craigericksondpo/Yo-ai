// ðŸ“˜ a2a.negotiation-response.v1.json
// This mirrors your A2AResponse pattern: discriminated by method, includes the result of the negotiation workflow, and is compatible with your decision.trace projections.
{
  "$id": "https://fasta2a.dev/schemas/a2a.negotiation-response.v1.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "A2A Negotiation Response",
  "description": "Response returned by the Decision-Master agent after evaluating a negotiation request.",
  "type": "object",
  "required": [
    "method",
    "request_id",
    "decision",
    "agreement_reached"
  ],
  "properties": {
    "method": {
      "type": "string",
      "const": "negotiation.response"
    },
    "request_id": {
      "type": "string",
      "description": "Echo of the request_id from the negotiation request."
    },
    "decision": {
      "type": "string",
      "enum": ["agreement-reached", "no-agreement"],
      "description": "Final decision of the negotiation workflow."
    },
    "agreement_reached": {
      "type": "boolean",
      "description": "Whether the negotiation resulted in an agreement."
    },
    "final_terms": {
      "type": "object",
      "description": "Final agreed-upon terms, present only if agreement_reached = true.",
      "properties": {
        "price": { "type": "number" },
        "delivery_window_days": { "type": "integer" },
        "support_level": { "type": "string" }
      },
      "additionalProperties": true
    },
    "reason": {
      "type": "string",
      "description": "Reason for no agreement, if applicable."
    },
    "diagnostics": {
      "type": "object",
      "description": "Optional diagnostic information for debugging or audit.",
      "properties": {
        "fit_outcome": { "type": "string" },
        "gap_outcome": { "type": "string" },
        "risk_outcome": { "type": "string" },
        "risk_score": { "type": "number" }
      },
      "additionalProperties": true
    },
    "metadata": {
      "type": "object",
      "description": "Optional metadata for routing, tracing, or agent context.",
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}